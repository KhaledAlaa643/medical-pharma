<div class="main_card_margen">
  <div class="card borderRadius_20px boxshadow-15 p-3">
    <form
      [formGroup]="filterForm"
      id="header"
      class="d-flex gap-2 flex-wrap align-items-end"
    >
      <div class="width-10 d-flex flex-column">
        <label class="mb-2">الخط</label>
        <p-dropdown
          [showClear]="true"
          placeholder=" "
          optionLabel="name"
          optionValue="id"
          [options]="tracks"
          formControlName="track_id"
        ></p-dropdown>
      </div>
      <div class="width-15 d-flex flex-column">
        <label class="mb-2"> اسم المنطقة</label>
        <p-dropdown
          [showClear]="true"
          formControlName="area_id"
          [options]="areas"
          placeholder=" "
          optionLabel="name"
          optionValue="id"
        ></p-dropdown>
      </div>
      <div class="width-20 d-flex flex-column">
        <label class="mb-2">اسم العميل</label>
        <p-dropdown
          [showClear]="true"
          formControlName="client_id"
          placeholder=" "
          [options]="clients"
          optionLabel="name"
          (onChange)="getPharmacies()"
          optionValue="id"
        ></p-dropdown>
      </div>
      <div class="width-20 d-flex flex-column">
        <label class="mb-2">اسم الصيدلية</label>
        <p-dropdown
          [showClear]="true"
          formControlName="pharmacy_id"
          [options]="pharmacies"
          placeholder=" "
          optionLabel="name"
          optionValue="id"
        ></p-dropdown>
      </div>

      <div class="width-10 d-flex justify-content-end my-2">
        <button
          type="button"
          (click)="filter()"
          class="green_bg_black_txt_btn width-60 p-2 h-40px borderRadius_10px border-0"
        >
          بحث
        </button>
      </div>

      <div
        class="flex-fill gap-2 d-flex align-items-center justify-content-end"
      >
        <svg
          width="30"
          height="30"
          viewBox="0 0 30 30"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g clip-path="url(#clip0_16564_146)">
            <path
              d="M5 6.25C5 5.91848 5.1317 5.60054 5.36612 5.36612C5.60054 5.1317 5.91848 5 6.25 5H11.25C11.5815 5 11.8995 5.1317 12.1339 5.36612C12.3683 5.60054 12.5 5.91848 12.5 6.25V11.25C12.5 11.5815 12.3683 11.8995 12.1339 12.1339C11.8995 12.3683 11.5815 12.5 11.25 12.5H6.25C5.91848 12.5 5.60054 12.3683 5.36612 12.1339C5.1317 11.8995 5 11.5815 5 11.25V6.25Z"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M8.75 21.25V21.2625"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M17.5 6.25C17.5 5.91848 17.6317 5.60054 17.8661 5.36612C18.1005 5.1317 18.4185 5 18.75 5H23.75C24.0815 5 24.3995 5.1317 24.6339 5.36612C24.8683 5.60054 25 5.91848 25 6.25V11.25C25 11.5815 24.8683 11.8995 24.6339 12.1339C24.3995 12.3683 24.0815 12.5 23.75 12.5H18.75C18.4185 12.5 18.1005 12.3683 17.8661 12.1339C17.6317 11.8995 17.5 11.5815 17.5 11.25V6.25Z"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M8.75 8.75V8.7625"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M5 18.75C5 18.4185 5.1317 18.1005 5.36612 17.8661C5.60054 17.6317 5.91848 17.5 6.25 17.5H11.25C11.5815 17.5 11.8995 17.6317 12.1339 17.8661C12.3683 18.1005 12.5 18.4185 12.5 18.75V23.75C12.5 24.0815 12.3683 24.3995 12.1339 24.6339C11.8995 24.8683 11.5815 25 11.25 25H6.25C5.91848 25 5.60054 24.8683 5.36612 24.6339C5.1317 24.3995 5 24.0815 5 23.75V18.75Z"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M21.25 8.75V8.7625"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M17.5 17.5H21.25"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M25 17.5V17.5125"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M17.5 17.5V21.25"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M17.5 25H21.25"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M21.25 21.25H25"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
            <path
              d="M25 21.25V25"
              stroke="#3F497F"
              stroke-width="2.75"
              stroke-linecap="round"
              stroke-linejoin="round"
            />
          </g>
          <defs>
            <clipPath id="clip0_16564_146">
              <rect width="30" height="30" fill="white" />
            </clipPath>
          </defs>
        </svg>
        <button
          class="printBtn fullScreen-768px d-flex fs-19 h-60px borderRadius_15px p-3 align-items-center text-center justify-content-center boxShadow-15"
          (click)="openModal()"
        >
          طباعة
          <svg
            width="32"
            height="32"
            viewBox="0 0 32 32"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g clip-path="url(#clip0_5900_794)">
              <path
                d="M22.6667 22.6667H25.3333C26.0406 22.6667 26.7189 22.3857 27.219 21.8856C27.719 21.3855 28 20.7072 28 20V14.6667C28 13.9594 27.719 13.2811 27.219 12.781C26.7189 12.281 26.0406 12 25.3333 12H6.66667C5.95942 12 5.28115 12.281 4.78105 12.781C4.28095 13.2811 4 13.9594 4 14.6667V20C4 20.7072 4.28095 21.3855 4.78105 21.8856C5.28115 22.3857 5.95942 22.6667 6.66667 22.6667H9.33333"
                stroke="#3F497F"
                stroke-width="2.75"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M22.6673 12V6.66667C22.6673 5.95942 22.3864 5.28115 21.8863 4.78105C21.3862 4.28095 20.7079 4 20.0007 4H12.0007C11.2934 4 10.6151 4.28095 10.115 4.78105C9.61494 5.28115 9.33398 5.95942 9.33398 6.66667V12"
                stroke="#3F497F"
                stroke-width="2.75"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
              <path
                d="M9.33398 19.9997C9.33398 19.2924 9.61494 18.6142 10.115 18.1141C10.6151 17.614 11.2934 17.333 12.0007 17.333H20.0007C20.7079 17.333 21.3862 17.614 21.8863 18.1141C22.3864 18.6142 22.6673 19.2924 22.6673 19.9997V25.333C22.6673 26.0403 22.3864 26.7185 21.8863 27.2186C21.3862 27.7187 20.7079 27.9997 20.0007 27.9997H12.0007C11.2934 27.9997 10.6151 27.7187 10.115 27.2186C9.61494 26.7185 9.33398 26.0403 9.33398 25.333V19.9997Z"
                stroke="#3F497F"
                stroke-width="2.75"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </g>
            <defs>
              <clipPath id="clip0_5900_794">
                <rect width="32" height="32" fill="white" />
              </clipPath>
            </defs>
          </svg>
        </button>
      </div>
    </form>

    <div id="table">
      <app-shared_table
        [columnsArray]="columnsArray"
        [columnsNames]="columnsName"
        [RowsData]="data"
        (openModalEvent)="getClickedId($event)"
        (itemChecked)="updateBatchIDs($event)"
      ></app-shared_table>
    </div>

    <div class="w-100 my-2">
      <div class="row m-2 p-2 align-items-center">
        <div class="col-lg-4 mt-2">
          <div
            class="h-60px borderRadius_20px justify-content-center p-2 lightGreen-border d-flex align-items-center"
          >
            اجمالي عدد الأذونات : {{ additional_data.orders_count }}
          </div>
        </div>
        <div class="col-lg-4 mt-2 d-flex justify-content-center">
          <button
            (click)="openDeliveryModal()"
            class="mainBlue-bg text-white border-0 width-60 h-50px borderRadius_20px d-flex align-items-center justify-content-center"
          >
            تم الاستلام
          </button>
        </div>
        <!-- <div class="col-lg-4 mt-2 ">
          <div class=" h-60px borderRadius_20px p-2 justify-content-center lightGreen-border d-flex align-items-center">
            اجمالي المبلغ : 2000
          </div>
        </div> -->
      </div>
    </div>
  </div>
</div>

<!-- delivery popup -->
<button
  hidden
  #receiveOpen
  type="button"
  class="btn btn-primary"
  data-bs-toggle="modal"
  data-bs-target="#deliveryModel"
></button>

<div
  class="modal fade"
  id="deliveryModel"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
  #myModal
>
  <div class="modal-dialog p-3 w-100">
    <div class="modal-content">
      <div class="modal-header">
        <div class="d-flex justify-content-center w-100">
          <h3 class="text-center fs-16 fw-600">تأكيد العملية</h3>
        </div>
        <div class="d-flex justify-content-end">
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>
      </div>

      <div class="modal-body">
        <div class="d-flex justify-content-center">
          <h4 class="text-center fs-16 fw-600">هل تريد تأكيد هذة العملية؟</h4>
        </div>
        <div
          class="d-flex borderRadius_15px p-2 width-100 lightGreen-border h-60px align-items-center justify-content-center my-4 gap-2"
        >
          <div class="d-flex flex-column text-center">
            <span>شنطه</span>
            <span>{{ totalsForReceiveModel.bags }}</span>
          </div>
          <hr style="border-color: black" class="h-100 lightGreen-border" />
          <div class="d-flex flex-column text-center">
            <span>باكت</span>
            <span>{{ totalsForReceiveModel.cartons }}</span>
          </div>
          <hr style="border-color: black" class="h-100 lightGreen-border" />
          <div class="d-flex flex-column text-center">
            <span>ثلاجة</span>
            <span>{{ totalsForReceiveModel.fridges }}</span>
          </div>
        </div>
        <div class="d-flex justify-content-center align-items-center gap-2">
          <button
            appDisableButton
            type="submit"
            (click)="sendOrder(selectedIds)"
            class="green_bg_black_txt_btn width-40 p-2 h-40px borderRadius_10px border-0"
            data-bs-dismiss="modal"
            aria-label="Close"
          >
            نعم
          </button>
          <button
            data-bs-dismiss="modal"
            aria-label="Close"
            class="green_bg_black_txt_btn width-40 p-2 h-40px borderRadius_10px border-0"
          >
            لا
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- print model -->
<button
  hidden
  #OpenOptionsModal
  type="button"
  (click)="choosePrintTypePopup.openAddModal()"
></button>
<app-printing-options-popup
  (printData)="print($event)"
  #choosePrintTypePopup
></app-printing-options-popup>
